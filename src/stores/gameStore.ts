import { create } from 'zustand'
import type { GameTable, GameRound } from '@/types'

// Mock Tables (20 bàn game)
const mockTables: GameTable[] = [
  {
    id: '0x123abc',
    name: 'Table Alpha',
    status: 'active',
    players: 4,
    totalRounds: 12,
    lastActivity: '2025-09-08T10:00:00Z',
    txHash: '0xabc123...',
  },
  {
    id: '0x456def',
    name: 'Table Beta',
    status: 'ended',
    players: 6,
    totalRounds: 15,
    lastActivity: '2025-09-07T15:30:00Z',
    txHash: '0xdef456...',
  },
  {
    id: '0x789ghi',
    name: 'Table Gamma',
    status: 'paused',
    players: 3,
    totalRounds: 8,
    lastActivity: '2025-09-06T09:00:00Z',
    txHash: '0xghi789...',
  },
  {
    id: '0xabc111',
    name: 'Table Delta',
    status: 'active',
    players: 5,
    totalRounds: 20,
    lastActivity: '2025-09-05T14:20:00Z',
    txHash: '0x111abc...',
  },
  {
    id: '0xdef222',
    name: 'Table Epsilon',
    status: 'ended',
    players: 7,
    totalRounds: 25,
    lastActivity: '2025-09-04T12:00:00Z',
    txHash: '0x222def...',
  },
  {
    id: '0xghi333',
    name: 'Table Zeta',
    status: 'active',
    players: 4,
    totalRounds: 10,
    lastActivity: '2025-09-03T18:30:00Z',
    txHash: '0x333ghi...',
  },
  {
    id: '0xjkl444',
    name: 'Table Eta',
    status: 'paused',
    players: 2,
    totalRounds: 5,
    lastActivity: '2025-09-02T10:10:00Z',
    txHash: '0x444jkl...',
  },
  {
    id: '0xmno555',
    name: 'Table Theta',
    status: 'active',
    players: 6,
    totalRounds: 18,
    lastActivity: '2025-09-01T16:45:00Z',
    txHash: '0x555mno...',
  },
  {
    id: '0xpqr666',
    name: 'Table Iota',
    status: 'ended',
    players: 8,
    totalRounds: 30,
    lastActivity: '2025-08-31T11:00:00Z',
    txHash: '0x666pqr...',
  },
  {
    id: '0xstu777',
    name: 'Table Kappa',
    status: 'active',
    players: 3,
    totalRounds: 7,
    lastActivity: '2025-08-30T14:30:00Z',
    txHash: '0x777stu...',
  },
  {
    id: '0xvwx888',
    name: 'Table Lambda',
    status: 'paused',
    players: 5,
    totalRounds: 14,
    lastActivity: '2025-08-29T09:15:00Z',
    txHash: '0x888vwx...',
  },
  {
    id: '0xyza999',
    name: 'Table Mu',
    status: 'active',
    players: 4,
    totalRounds: 16,
    lastActivity: '2025-08-28T17:00:00Z',
    txHash: '0x999yza...',
  },
  {
    id: '0x111aaa',
    name: 'Table Nu',
    status: 'ended',
    players: 6,
    totalRounds: 22,
    lastActivity: '2025-08-27T13:20:00Z',
    txHash: '0xaaa111...',
  },
  {
    id: '0x222bbb',
    name: 'Table Xi',
    status: 'active',
    players: 7,
    totalRounds: 19,
    lastActivity: '2025-08-26T10:50:00Z',
    txHash: '0xbbb222...',
  },
  {
    id: '0x333ccc',
    name: 'Table Omicron',
    status: 'paused',
    players: 3,
    totalRounds: 6,
    lastActivity: '2025-08-25T15:30:00Z',
    txHash: '0xccc333...',
  },
  {
    id: '0x444ddd',
    name: 'Table Pi',
    status: 'active',
    players: 5,
    totalRounds: 17,
    lastActivity: '2025-08-24T11:10:00Z',
    txHash: '0xddd444...',
  },
  {
    id: '0x555eee',
    name: 'Table Rho',
    status: 'ended',
    players: 8,
    totalRounds: 28,
    lastActivity: '2025-08-23T14:00:00Z',
    txHash: '0xeee555...',
  },
  {
    id: '0x666fff',
    name: 'Table Sigma',
    status: 'active',
    players: 4,
    totalRounds: 13,
    lastActivity: '2025-08-22T09:45:00Z',
    txHash: '0xfff666...',
  },
  {
    id: '0x777ggg',
    name: 'Table Tau',
    status: 'paused',
    players: 2,
    totalRounds: 9,
    lastActivity: '2025-08-21T16:20:00Z',
    txHash: '0xggg777...',
  },
  {
    id: '0x888hhh',
    name: 'Table Upsilon',
    status: 'active',
    players: 6,
    totalRounds: 21,
    lastActivity: '2025-08-20T12:30:00Z',
    txHash: '0xhhh888...',
  },
]

// Mock Rounds (50 ván game, liên kết với tableId, mới nhất trước)
const mockRounds: GameRound[] = [
  {
    id: '0xround001',
    tableId: '0x123abc',
    roundNumber: 12,
    winner: '0xPlayerA',
    bets: 0.5,
    txHash: '0xroundTx001...',
    timestamp: '2025-09-08T12:00:00Z',
  },
  {
    id: '0xround002',
    tableId: '0x123abc',
    roundNumber: 11,
    winner: '0xPlayerB',
    bets: 1.2,
    txHash: '0xroundTx002...',
    timestamp: '2025-09-08T11:30:00Z',
  },
  {
    id: '0xround003',
    tableId: '0x456def',
    roundNumber: 15,
    winner: '0xPlayerC',
    bets: 0.8,
    txHash: '0xroundTx003...',
    timestamp: '2025-09-07T16:00:00Z',
  },
  {
    id: '0xround004',
    tableId: '0x789ghi',
    roundNumber: 8,
    winner: '0xPlayerD',
    bets: 0.3,
    txHash: '0xroundTx004...',
    timestamp: '2025-09-06T14:20:00Z',
  },
  {
    id: '0xround005',
    tableId: '0xabc111',
    roundNumber: 20,
    winner: '0xPlayerE',
    bets: 1.5,
    txHash: '0xroundTx005...',
    timestamp: '2025-09-05T10:00:00Z',
  },
  {
    id: '0xround006',
    tableId: '0xdef222',
    roundNumber: 25,
    winner: '0xPlayerF',
    bets: 2.0,
    txHash: '0xroundTx006...',
    timestamp: '2025-09-04T15:45:00Z',
  },
  {
    id: '0xround007',
    tableId: '0xghi333',
    roundNumber: 10,
    winner: '0xPlayerA',
    bets: 0.7,
    txHash: '0xroundTx007...',
    timestamp: '2025-09-03T12:10:00Z',
  },
  {
    id: '0xround008',
    tableId: '0xjkl444',
    roundNumber: 5,
    winner: '0xPlayerB',
    bets: 0.4,
    txHash: '0xroundTx008...',
    timestamp: '2025-09-02T09:30:00Z',
  },
  {
    id: '0xround009',
    tableId: '0xmno555',
    roundNumber: 18,
    winner: '0xPlayerC',
    bets: 1.1,
    txHash: '0xroundTx009...',
    timestamp: '2025-09-01T17:00:00Z',
  },
  {
    id: '0xround010',
    tableId: '0xpqr666',
    roundNumber: 30,
    winner: '0xPlayerD',
    bets: 1.8,
    txHash: '0xroundTx010...',
    timestamp: '2025-08-31T13:20:00Z',
  },
  {
    id: '0xround011',
    tableId: '0xstu777',
    roundNumber: 7,
    winner: '0xPlayerE',
    bets: 0.6,
    txHash: '0xroundTx011...',
    timestamp: '2025-08-30T11:00:00Z',
  },
  {
    id: '0xround012',
    tableId: '0xvwx888',
    roundNumber: 14,
    winner: '0xPlayerF',
    bets: 0.9,
    txHash: '0xroundTx012...',
    timestamp: '2025-08-29T15:30:00Z',
  },
  {
    id: '0xround013',
    tableId: '0xyza999',
    roundNumber: 16,
    winner: '0xPlayerA',
    bets: 1.0,
    txHash: '0xroundTx013...',
    timestamp: '2025-08-28T10:45:00Z',
  },
  {
    id: '0xround014',
    tableId: '0x111aaa',
    roundNumber: 22,
    winner: '0xPlayerB',
    bets: 1.3,
    txHash: '0xroundTx014...',
    timestamp: '2025-08-27T14:00:00Z',
  },
  {
    id: '0xround015',
    tableId: '0x222bbb',
    roundNumber: 19,
    winner: '0xPlayerC',
    bets: 0.7,
    txHash: '0xroundTx015...',
    timestamp: '2025-08-26T12:15:00Z',
  },
  {
    id: '0xround016',
    tableId: '0x333ccc',
    roundNumber: 6,
    winner: '0xPlayerD',
    bets: 0.4,
    txHash: '0xroundTx016...',
    timestamp: '2025-08-25T09:50:00Z',
  },
  {
    id: '0xround017',
    tableId: '0x444ddd',
    roundNumber: 17,
    winner: '0xPlayerE',
    bets: 1.2,
    txHash: '0xroundTx017...',
    timestamp: '2025-08-24T16:30:00Z',
  },
  {
    id: '0xround018',
    tableId: '0x555eee',
    roundNumber: 28,
    winner: '0xPlayerF',
    bets: 1.9,
    txHash: '0xroundTx018...',
    timestamp: '2025-08-23T11:10:00Z',
  },
  {
    id: '0xround019',
    tableId: '0x666fff',
    roundNumber: 13,
    winner: '0xPlayerA',
    bets: 0.8,
    txHash: '0xroundTx019...',
    timestamp: '2025-08-22T14:20:00Z',
  },
  {
    id: '0xround020',
    tableId: '0x777ggg',
    roundNumber: 9,
    winner: '0xPlayerB',
    bets: 0.5,
    txHash: '0xroundTx020...',
    timestamp: '2025-08-21T10:00:00Z',
  },
  {
    id: '0xround021',
    tableId: '0x888hhh',
    roundNumber: 21,
    winner: '0xPlayerC',
    bets: 1.4,
    txHash: '0xroundTx021...',
    timestamp: '2025-08-20T15:45:00Z',
  },
  {
    id: '0xround022',
    tableId: '0x123abc',
    roundNumber: 10,
    winner: '0xPlayerD',
    bets: 0.6,
    txHash: '0xroundTx022...',
    timestamp: '2025-08-19T12:30:00Z',
  },
  {
    id: '0xround023',
    tableId: '0x456def',
    roundNumber: 14,
    winner: '0xPlayerE',
    bets: 1.0,
    txHash: '0xroundTx023...',
    timestamp: '2025-08-18T09:15:00Z',
  },
  {
    id: '0xround024',
    tableId: '0x789ghi',
    roundNumber: 7,
    winner: '0xPlayerF',
    bets: 0.7,
    txHash: '0xroundTx024...',
    timestamp: '2025-08-17T17:00:00Z',
  },
  {
    id: '0xround025',
    tableId: '0xabc111',
    roundNumber: 19,
    winner: '0xPlayerA',
    bets: 1.3,
    txHash: '0xroundTx025...',
    timestamp: '2025-08-16T13:20:00Z',
  },
  {
    id: '0xround026',
    tableId: '0xdef222',
    roundNumber: 24,
    winner: '0xPlayerB',
    bets: 1.8,
    txHash: '0xroundTx026...',
    timestamp: '2025-08-15T11:00:00Z',
  },
  {
    id: '0xround027',
    tableId: '0xghi333',
    roundNumber: 9,
    winner: '0xPlayerC',
    bets: 0.9,
    txHash: '0xroundTx027...',
    timestamp: '2025-08-14T15:30:00Z',
  },
  {
    id: '0xround028',
    tableId: '0xjkl444',
    roundNumber: 4,
    winner: '0xPlayerD',
    bets: 0.4,
    txHash: '0xroundTx028...',
    timestamp: '2025-08-13T10:45:00Z',
  },
  {
    id: '0xround029',
    tableId: '0xmno555',
    roundNumber: 17,
    winner: '0xPlayerE',
    bets: 1.1,
    txHash: '0xroundTx029...',
    timestamp: '2025-08-12T14:00:00Z',
  },
  {
    id: '0xround030',
    tableId: '0xpqr666',
    roundNumber: 29,
    winner: '0xPlayerF',
    bets: 1.7,
    txHash: '0xroundTx030...',
    timestamp: '2025-08-11T12:15:00Z',
  },
  {
    id: '0xround031',
    tableId: '0xstu777',
    roundNumber: 6,
    winner: '0xPlayerA',
    bets: 0.6,
    txHash: '0xroundTx031...',
    timestamp: '2025-08-10T09:50:00Z',
  },
  {
    id: '0xround032',
    tableId: '0xvwx888',
    roundNumber: 13,
    winner: '0xPlayerB',
    bets: 0.8,
    txHash: '0xroundTx032...',
    timestamp: '2025-08-09T16:30:00Z',
  },
  {
    id: '0xround033',
    tableId: '0xyza999',
    roundNumber: 15,
    winner: '0xPlayerC',
    bets: 1.0,
    txHash: '0xroundTx033...',
    timestamp: '2025-08-08T11:10:00Z',
  },
  {
    id: '0xround034',
    tableId: '0x111aaa',
    roundNumber: 21,
    winner: '0xPlayerD',
    bets: 1.2,
    txHash: '0xroundTx034...',
    timestamp: '2025-08-07T14:20:00Z',
  },
  {
    id: '0xround035',
    tableId: '0x222bbb',
    roundNumber: 18,
    winner: '0xPlayerE',
    bets: 0.7,
    txHash: '0xroundTx035...',
    timestamp: '2025-08-06T10:00:00Z',
  },
  {
    id: '0xround036',
    tableId: '0x333ccc',
    roundNumber: 5,
    winner: '0xPlayerF',
    bets: 0.5,
    txHash: '0xroundTx036...',
    timestamp: '2025-08-05T15:45:00Z',
  },
  {
    id: '0xround037',
    tableId: '0x444ddd',
    roundNumber: 16,
    winner: '0xPlayerA',
    bets: 1.1,
    txHash: '0xroundTx037...',
    timestamp: '2025-08-04T12:30:00Z',
  },
  {
    id: '0xround038',
    tableId: '0x555eee',
    roundNumber: 27,
    winner: '0xPlayerB',
    bets: 1.8,
    txHash: '0xroundTx038...',
    timestamp: '2025-08-03T09:15:00Z',
  },
  {
    id: '0xround039',
    tableId: '0x666fff',
    roundNumber: 12,
    winner: '0xPlayerC',
    bets: 0.9,
    txHash: '0xroundTx039...',
    timestamp: '2025-08-02T17:00:00Z',
  },
  {
    id: '0xround040',
    tableId: '0x777ggg',
    roundNumber: 8,
    winner: '0xPlayerD',
    bets: 0.6,
    txHash: '0xroundTx040...',
    timestamp: '2025-08-01T13:20:00Z',
  },
  {
    id: '0xround041',
    tableId: '0x888hhh',
    roundNumber: 20,
    winner: '0xPlayerE',
    bets: 1.3,
    txHash: '0xroundTx041...',
    timestamp: '2025-07-31T11:00:00Z',
  },
  {
    id: '0xround042',
    tableId: '0x123abc',
    roundNumber: 9,
    winner: '0xPlayerF',
    bets: 0.7,
    txHash: '0xroundTx042...',
    timestamp: '2025-07-30T15:30:00Z',
  },
  {
    id: '0xround043',
    tableId: '0x456def',
    roundNumber: 13,
    winner: '0xPlayerA',
    bets: 1.0,
    txHash: '0xroundTx043...',
    timestamp: '2025-07-29T10:45:00Z',
  },
  {
    id: '0xround044',
    tableId: '0x789ghi',
    roundNumber: 6,
    winner: '0xPlayerB',
    bets: 0.5,
    txHash: '0xroundTx044...',
    timestamp: '2025-07-28T14:00:00Z',
  },
  {
    id: '0xround045',
    tableId: '0xabc111',
    roundNumber: 18,
    winner: '0xPlayerC',
    bets: 1.2,
    txHash: '0xroundTx045...',
    timestamp: '2025-07-27T12:15:00Z',
  },
  {
    id: '0xround046',
    tableId: '0xdef222',
    roundNumber: 23,
    winner: '0xPlayerD',
    bets: 1.7,
    txHash: '0xroundTx046...',
    timestamp: '2025-07-26T09:50:00Z',
  },
  {
    id: '0xround047',
    tableId: '0xghi333',
    roundNumber: 8,
    winner: '0xPlayerE',
    bets: 0.8,
    txHash: '0xroundTx047...',
    timestamp: '2025-07-25T16:30:00Z',
  },
  {
    id: '0xround048',
    tableId: '0xjkl444',
    roundNumber: 3,
    winner: '0xPlayerF',
    bets: 0.4,
    txHash: '0xroundTx048...',
    timestamp: '2025-07-24T11:10:00Z',
  },
  {
    id: '0xround049',
    tableId: '0xmno555',
    roundNumber: 16,
    winner: '0xPlayerA',
    bets: 1.1,
    txHash: '0xroundTx049...',
    timestamp: '2025-07-23T14:20:00Z',
  },
  {
    id: '0xround050',
    tableId: '0xpqr666',
    roundNumber: 28,
    winner: '0xPlayerB',
    bets: 1.6,
    txHash: '0xroundTx050...',
    timestamp: '2025-07-22T10:00:00Z',
  },
]

// Sắp xếp rounds theo timestamp mới nhất
const sortedRounds = [...mockRounds].sort(
  (a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()
)

// Cập nhật stats cho phù hợp
const mockStats = {
  totalTables: 100, // 20 tables
  totalRounds: 23200, // 200 rounds
  totalBets: 438.7, // Tổng bets từ rounds
  activeGames: 230, // Giả sử 10 active tables
  totalUsers: 15000, // Tăng users để thực tế hơn
}

// Mock Growth Data (12 tháng, từ Oct 2024 đến Sep 2025)
interface GrowthData {
  month: string
  users: number
  rounds: number
}

const mockGrowthData: GrowthData[] = [
  { month: 'Oct 2024', users: 50, rounds: 5 },
  { month: 'Nov 2024', users: 100, rounds: 10 },
  { month: 'Dec 2024', users: 200, rounds: 20 },
  { month: 'Jan 2025', users: 300, rounds: 30 },
  { month: 'Feb 2025', users: 400, rounds: 40 },
  { month: 'Mar 2025', users: 500, rounds: 50 },
  { month: 'Apr 2025', users: 600, rounds: 60 },
  { month: 'May 2025', users: 800, rounds: 80 },
  { month: 'Jun 2025', users: 1000, rounds: 100 },
  { month: 'Jul 2025', users: 1200, rounds: 120 },
  { month: 'Aug 2025', users: 1350, rounds: 150 },
  { month: 'Sep 2025', users: 1500, rounds: 200 }, // Khớp với totalUsers, totalRounds
]

interface GameState {
  tables: GameTable[]
  rounds: GameRound[]
  stats: typeof mockStats
  growthData: GrowthData[]
  searchFilter: string
  filteredTables: GameTable[]
  filteredRounds: GameRound[]
  setSearchFilter: (filter: string) => void
  loadData: () => void
}

export const useGameStore = create<GameState>((set) => ({
  tables: [],
  rounds: [],
  stats: mockStats,
  growthData: mockGrowthData,
  searchFilter: '',
  filteredTables: [],
  filteredRounds: [],

  setSearchFilter: (filter) =>
    set((state) => {
      const newFilteredTables = state.tables.filter(
        (table) =>
          table.id.toLowerCase().includes(filter.toLowerCase()) ||
          table.name.toLowerCase().includes(filter.toLowerCase())
      )
      const newFilteredRounds = state.rounds.filter(
        (round) =>
          round.id.toLowerCase().includes(filter.toLowerCase()) ||
          round.tableId.toLowerCase().includes(filter.toLowerCase()) ||
          round.txHash.toLowerCase().includes(filter.toLowerCase())
      )
      return {
        searchFilter: filter,
        filteredTables: newFilteredTables,
        filteredRounds: newFilteredRounds,
      }
    }),

  loadData: () =>
    set({
      tables: mockTables,
      rounds: sortedRounds,
      filteredTables: mockTables,
      filteredRounds: sortedRounds,
    }),
}))
